{"config":{"lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Another Typesetter - \u53e6\u4e00\u500b\u6392\u7248\u5668 \u6458\u8981 \u672c\u6587\u662f\u8b1b\u4e00\u500b\u6392\u7248\u5668\u7684\u96db\u5f62\u5982\u4f55\u88fd\u4f5c\u7684\u8003\u5bdf\uff0c\u4f7f\u7528Rust\u8a9e\u8a00\u3002 \u5e8f\u8a00 \u4ee5\u524d\u5f9e\u570b\u4e2d\u6642\u5019\u8a66\u7528Linux\u4ee5\u53ca\u67b6\u7ad9\u4ee5\u5f8c\uff0c\u5c31\u958b\u59cb\u60f3\u7528LaTeX\u6392\u7248\u4e9b\u81ea\u5df1\u6240\u5beb\u7684\u6771\u897f\uff0c\u5176\u4e2d\u5305\u542b\u89ba\u5f97LaTeX\u7684\u8a9e\u6cd5\u4e0d\u597d\u60f3\u8981\u91cd\u9020\u8f2a\u5b50\u3002\u5c31\u7b97\u5f8c\u4f86\u5927\u5b78\u6c92\u6709\u8d70\u4e0a\u8cc7\u8a0a\u5de5\u7a0b\u9019\u689d\u8def\uff0c\u9084\u662f\u5e0c\u671b\u6709\u5929\u81f3\u5c11\u80fd\u5920\u5b8c\u6210\u500b\u80fd\u7528\u7684\u96db\u5f62\u3002 \u4f46\u662f\u9019\u662f\u6d89\u53ca\u5b57\u9ad4\u6a94\u6848\u7684\u8655\u7406\u3001PDF\u7684\u8655\u7406\u3001\u8a9e\u6cd5\u5206\u6790\uff0c\u5f8c\u4f86\u81ea\u5df1\u56e0\u70ba\u4e0d\u77e5\u9053\u5982\u4f55\u958b\u767c\uff0c\u6240\u4ee5\u4e00\u76f4\u505c\u64fa\u3002\u4e0d\u662f\u9047\u5230\u5f88\u591a\u87f2\uff0c\u5c31\u662f\u6548\u80fd\u554f\u984c\u6709\u7f3a\u5931\u3002\u56e0\u70ba\u6642\u9593\u7e41\u5fd9\u5f88\u5c11\u66f4\u4e0d\u6d88\u8aaa\u4e86\u3002\u751a\u81f3\u8cb7\u4e86Knuth\u6559\u6388\u7684 Digital Typography \uff0c\u60f3\u8981\u77ad\u89e3\u65b7\u884c\u6f14\u7b97\u6cd5\uff0c\u7d50\u679c\u7c97\u4f30\u4e94\u3001\u516d\u5341\u9801\uff0c\u6240\u4ee5\u5e7e\u4e4e\u6c92\u6709\u8b80\u3002 \u53e6\u5916\u7b46\u8005\u4e00\u500b\u5206\u652f\u8208\u8da3\u662f\u7de8\u8b6f\u5668\u7684\u76f8\u95dc\u77e5\u8b58\uff0c\u6240\u4ee5\u958b\u59cb\u8b80\u548c\u738b\u57a0\u7684\u7de8\u8b6f\u5668\u601d\u60f3\u7cfb\u51fa\u540c\u9580\u7684Jeremy G. Siek\u6240\u8457\u4f5c\u4e4b Essential of Complication: An Incremental Approach in Racket \uff08\u7de8\u8b6f\u4e4b\u8981\u7d20\uff1aRacket\u8a9e\u8a00\u7684\u905e\u589e\u7684\u65b9\u6cd5\uff09\u3002\u6211\u60f3\u5230\uff1a\u65e2\u7136\u7de8\u8b6f\u5668\u9019\u7a2e\u8907\u96dc\u7684\u8edf\u9ad4\uff0c\u53ef\u4ee5\u4e00\u5c64\u4e00\u5c64\u7684\u7528pass\u4f86\u905e\u589e\u529f\u80fd\uff0c\u5c31\u50cf\u6c34\u5f69\u5f9e\u80cc\u666f\u3001\u5927\u7269\u9ad4\u4e00\u76f4\u7531\u5c11\u6f38\u591a\u7684\u5b8c\u6210\u3002\u800c\u6392\u7248\u8edf\u9ad4\u4e5f\u662f\u628a\u4f7f\u7528\u8005\u8f38\u5165\u7684\u6392\u7248\u4e4b\u9818\u57df\u7279\u5b9a\u8a9e\u8a00(DSL)\u8f49\u63db\u6210\u6587\u5b57\u3001\u5716\u5f62\u548c\u4e8c\u7dad\u5ea7\u6a19\u5c0d\u61c9\u95dc\u4fc2\uff08\u6700\u5f8c\u532f\u51fa\u6210PDF\u6216SVG\u7b49\u7b49\uff09\u7684\u7de8\u8b6f\u5668\uff0c\u82e5\u662f\u80fd\u5920\u7528\u5c64\u5c64\u905e\u589e\u7684\u65b9\u6cd5\u4f86\u5b8c\u6210\uff0c\u76f8\u4fe1\u4e5f\u80fd\u5920\u907f\u514d\u7d50\u69cb\u7684\u8907\u96dc\u5316\u5c0e\u81f4\u932f\u8aa4\u5bb9\u6613\u767c\u751f\u7684\u632b\u6298\u3002 \u7136\u800c\u6392\u7248\u8a9e\u8a00\u4e0d\u53ea\u662f\u8f38\u5165\u6587\u5b57\u8f49\u5716\u5f62\u800c\u5df2\uff0c\u66f4\u91cd\u8981\u7684\u662f\u9084\u8981\u6709\u56e0\u61c9\u7f8e\u89c0\u7684\u81ea\u52d5\u65b7\u884c(justification)\u548c\u65b7\u5b57(hyphenation)\u7b49\u7b49\u7684\u6f14\u7b97\u6cd5\u3001\u9084\u6709PDF\u7684\u57fa\u672c\u77e5\u8b58\u3001\u5b57\u578b\u51fd\u5f0f\u5eab\u7684\u53d6\u7528\u3001\u6392\u7248\u8981\u6c42\uff08\u591a\u6b04\uff09\u3001\u751a\u81f3\u9084\u727d\u6d89\u5230\u8a9e\u8a00\u7279\u6709\u7684\u7279\u6027\uff1a\u6bd4\u5982\u6771\u4e9e\u5168\u5f62\u6587\u5b57\uff08\u6f22\u5b57\u3001\u8afa\u6587\u3001\u65e5\u6587\u5047\u540d\u3001\u6ce8\u97f3\u7b26\u865f\uff09\u548c\u975e\u5168\u5f62\u6587\u5b57\u4e2d\u9593\u8981\u52a0\u7a7a\u767d\uff0c\u4ee5\u53ca\u5f9e\u5de6\u5beb\u5230\u53f3\u7684\u6587\u5b57\uff08\u5e0c\u4f2f\u4f86\u5b57\u6bcd\u548c\u963f\u62c9\u4f2f\u5b57\u6bcd\u7b49\uff09\u7684\u6392\u7248\u65b9\u6cd5\uff0c\u4e0d\u4e00\u800c\u8db3\u3002 \u70ba\u4e86\u7c21\u5316\u8d77\u898b\uff0c\u4e14\u76ee\u6a19\u8b80\u8005\u662f\u81fa\u7063\u7684\u53d7\u773e\uff0c\u672c\u66f8\u50c5\u6d89\u53ca\u5230ASCII\u82f1\u6587\u5b57\u6bcd\u2014\u2014\u9802\u591a\u52a0\u4e9b\u4e00\u4e9b\u9644\u52a0\u7b26\u865f(diacritics)\u548c\u6f22\u5b57\u7684\u6392\u7248\u3002\u5176\u4ed6\u7684\u529f\u80fd\u5e0c\u671b\u8b80\u8005\u53ef\u4ee5\u6f38\u6b21\u7531\u5c11\u6f38\u591a\u7684\u9644\u52a0\u3002\u53e6\u5916\u9019\u908a\u6703\u4f7f\u7528\u5230\u4e00\u4e9bLISP\u7684\u8868\u9054\u5f0f\u4f86\u8868\u9054\u62bd\u8c61\u8a9e\u6cd5\u6a39\uff0c\u82e5\u662f\u4e0d\u61c2\u7684\u8a71\uff0c\u53ef\u4ee5\u770b\u4e00\u9ede\u6559 Lisp\u6216\u662fScheme\u7684\u66f8\uff0c\u5982SICP\u3002\u53e6\u5916\u9019\u672c\u66f8\u4e0d\u662f\u7de8\u8b6f\u539f\u7406\u548c\u63cf\u8ff0PDF\u898f\u683c\u7684\u66f8\uff0c\u4e0d\u6d89\u7375\u5e95\u5c64\u7684\u77e5\u8b58\uff0c\u6709\u9700\u8981\u7684\u53ef\u4ee5\u53c3\u8003\u76f8\u95dc\u9818\u57df\u7684\u66f8\u3002 \u5148\u5099\u77e5\u8b58 \u9019\u4e0d\u662f\u6559\u4e00\u4f4d\u5165\u9580\u4f7f\u7528\u8005\u5982\u5f9e\u96f6\u77e5\u8b58\u64b0\u5beb\u6392\u7248\u8edf\u9ad4\u7684\u66f8\uff0c\u8b80\u8005\u61c9\u8a72\u6709\u77e5\u9053\u5982\u4f55\u4f7f\u7528\u975c\u614b\u578b\u5225\u8a9e\u8a00\u7684\u7d93\u9a57\uff0c\u6bd4\u5982\u4e00\u9edeC\u3001\u6216\u662fRust\u7b49\u7b49\u3002\u53e6\u5916\u62bd\u8c61\u8a9e\u6cd5\u6a39\u70ba\u6c42\u65b9\u4fbf\uff0c\u4f7f\u7528LISP\u64b0\u5beb\uff0c\u6240\u4ee5\u9700\u8981\u6703LISP\u548cScheme\u7684\u77e5\u8b58\uff08\u77e5\u540d\u6559\u79d1\u66f8SICP\u7684\u958b\u982d\u53ef\u4ee5\u8b80\u4e00\u8b80\uff09\u3002 \u9019\u672c\u66f8\u4e5f\u4e0d\u6559\u7de8\u8b6f\u7406\u8ad6\u548ctokenizing\u3001parsing\u3001\u72c0\u614b\u6a5f\u7b49\u7b49\u7684\uff0c\u9802\u591a\u53ea\u6703\u5e36\u5230\u4e00\u4e9b\u5f88\u57fa\u790e\u7684\u77e5\u8b58\uff0c\u6709\u9700\u8981\u7684\u8acb\u53e6\u5916\u518d\u8b80\u3002\u6240\u4ee5\u4f7f\u7528\u8005\u9700\u8981\u6703\u6709\u4f7f\u7528\u6b63\u898f\u8868\u9054\u5f0f(regex)\u7684\u80fd\u529b\u3002 \u64cd\u4f5c\u74b0\u5883\u4f7f\u7528Linux\u3002\u9700\u8981\u5b89\u88ddfontconfig\u7b49\u5957\u4ef6\u3002 \u5b9a\u7fa9\u62bd\u8c61\u8a9e\u6cd5\u6a39\u548c\u8a9e\u6cd5","title":"Home"},{"location":"#another-typesetter-","text":"","title":"Another Typesetter - \u53e6\u4e00\u500b\u6392\u7248\u5668"},{"location":"#_1","text":"\u672c\u6587\u662f\u8b1b\u4e00\u500b\u6392\u7248\u5668\u7684\u96db\u5f62\u5982\u4f55\u88fd\u4f5c\u7684\u8003\u5bdf\uff0c\u4f7f\u7528Rust\u8a9e\u8a00\u3002","title":"\u6458\u8981"},{"location":"#_2","text":"\u4ee5\u524d\u5f9e\u570b\u4e2d\u6642\u5019\u8a66\u7528Linux\u4ee5\u53ca\u67b6\u7ad9\u4ee5\u5f8c\uff0c\u5c31\u958b\u59cb\u60f3\u7528LaTeX\u6392\u7248\u4e9b\u81ea\u5df1\u6240\u5beb\u7684\u6771\u897f\uff0c\u5176\u4e2d\u5305\u542b\u89ba\u5f97LaTeX\u7684\u8a9e\u6cd5\u4e0d\u597d\u60f3\u8981\u91cd\u9020\u8f2a\u5b50\u3002\u5c31\u7b97\u5f8c\u4f86\u5927\u5b78\u6c92\u6709\u8d70\u4e0a\u8cc7\u8a0a\u5de5\u7a0b\u9019\u689d\u8def\uff0c\u9084\u662f\u5e0c\u671b\u6709\u5929\u81f3\u5c11\u80fd\u5920\u5b8c\u6210\u500b\u80fd\u7528\u7684\u96db\u5f62\u3002 \u4f46\u662f\u9019\u662f\u6d89\u53ca\u5b57\u9ad4\u6a94\u6848\u7684\u8655\u7406\u3001PDF\u7684\u8655\u7406\u3001\u8a9e\u6cd5\u5206\u6790\uff0c\u5f8c\u4f86\u81ea\u5df1\u56e0\u70ba\u4e0d\u77e5\u9053\u5982\u4f55\u958b\u767c\uff0c\u6240\u4ee5\u4e00\u76f4\u505c\u64fa\u3002\u4e0d\u662f\u9047\u5230\u5f88\u591a\u87f2\uff0c\u5c31\u662f\u6548\u80fd\u554f\u984c\u6709\u7f3a\u5931\u3002\u56e0\u70ba\u6642\u9593\u7e41\u5fd9\u5f88\u5c11\u66f4\u4e0d\u6d88\u8aaa\u4e86\u3002\u751a\u81f3\u8cb7\u4e86Knuth\u6559\u6388\u7684 Digital Typography \uff0c\u60f3\u8981\u77ad\u89e3\u65b7\u884c\u6f14\u7b97\u6cd5\uff0c\u7d50\u679c\u7c97\u4f30\u4e94\u3001\u516d\u5341\u9801\uff0c\u6240\u4ee5\u5e7e\u4e4e\u6c92\u6709\u8b80\u3002 \u53e6\u5916\u7b46\u8005\u4e00\u500b\u5206\u652f\u8208\u8da3\u662f\u7de8\u8b6f\u5668\u7684\u76f8\u95dc\u77e5\u8b58\uff0c\u6240\u4ee5\u958b\u59cb\u8b80\u548c\u738b\u57a0\u7684\u7de8\u8b6f\u5668\u601d\u60f3\u7cfb\u51fa\u540c\u9580\u7684Jeremy G. Siek\u6240\u8457\u4f5c\u4e4b Essential of Complication: An Incremental Approach in Racket \uff08\u7de8\u8b6f\u4e4b\u8981\u7d20\uff1aRacket\u8a9e\u8a00\u7684\u905e\u589e\u7684\u65b9\u6cd5\uff09\u3002\u6211\u60f3\u5230\uff1a\u65e2\u7136\u7de8\u8b6f\u5668\u9019\u7a2e\u8907\u96dc\u7684\u8edf\u9ad4\uff0c\u53ef\u4ee5\u4e00\u5c64\u4e00\u5c64\u7684\u7528pass\u4f86\u905e\u589e\u529f\u80fd\uff0c\u5c31\u50cf\u6c34\u5f69\u5f9e\u80cc\u666f\u3001\u5927\u7269\u9ad4\u4e00\u76f4\u7531\u5c11\u6f38\u591a\u7684\u5b8c\u6210\u3002\u800c\u6392\u7248\u8edf\u9ad4\u4e5f\u662f\u628a\u4f7f\u7528\u8005\u8f38\u5165\u7684\u6392\u7248\u4e4b\u9818\u57df\u7279\u5b9a\u8a9e\u8a00(DSL)\u8f49\u63db\u6210\u6587\u5b57\u3001\u5716\u5f62\u548c\u4e8c\u7dad\u5ea7\u6a19\u5c0d\u61c9\u95dc\u4fc2\uff08\u6700\u5f8c\u532f\u51fa\u6210PDF\u6216SVG\u7b49\u7b49\uff09\u7684\u7de8\u8b6f\u5668\uff0c\u82e5\u662f\u80fd\u5920\u7528\u5c64\u5c64\u905e\u589e\u7684\u65b9\u6cd5\u4f86\u5b8c\u6210\uff0c\u76f8\u4fe1\u4e5f\u80fd\u5920\u907f\u514d\u7d50\u69cb\u7684\u8907\u96dc\u5316\u5c0e\u81f4\u932f\u8aa4\u5bb9\u6613\u767c\u751f\u7684\u632b\u6298\u3002 \u7136\u800c\u6392\u7248\u8a9e\u8a00\u4e0d\u53ea\u662f\u8f38\u5165\u6587\u5b57\u8f49\u5716\u5f62\u800c\u5df2\uff0c\u66f4\u91cd\u8981\u7684\u662f\u9084\u8981\u6709\u56e0\u61c9\u7f8e\u89c0\u7684\u81ea\u52d5\u65b7\u884c(justification)\u548c\u65b7\u5b57(hyphenation)\u7b49\u7b49\u7684\u6f14\u7b97\u6cd5\u3001\u9084\u6709PDF\u7684\u57fa\u672c\u77e5\u8b58\u3001\u5b57\u578b\u51fd\u5f0f\u5eab\u7684\u53d6\u7528\u3001\u6392\u7248\u8981\u6c42\uff08\u591a\u6b04\uff09\u3001\u751a\u81f3\u9084\u727d\u6d89\u5230\u8a9e\u8a00\u7279\u6709\u7684\u7279\u6027\uff1a\u6bd4\u5982\u6771\u4e9e\u5168\u5f62\u6587\u5b57\uff08\u6f22\u5b57\u3001\u8afa\u6587\u3001\u65e5\u6587\u5047\u540d\u3001\u6ce8\u97f3\u7b26\u865f\uff09\u548c\u975e\u5168\u5f62\u6587\u5b57\u4e2d\u9593\u8981\u52a0\u7a7a\u767d\uff0c\u4ee5\u53ca\u5f9e\u5de6\u5beb\u5230\u53f3\u7684\u6587\u5b57\uff08\u5e0c\u4f2f\u4f86\u5b57\u6bcd\u548c\u963f\u62c9\u4f2f\u5b57\u6bcd\u7b49\uff09\u7684\u6392\u7248\u65b9\u6cd5\uff0c\u4e0d\u4e00\u800c\u8db3\u3002 \u70ba\u4e86\u7c21\u5316\u8d77\u898b\uff0c\u4e14\u76ee\u6a19\u8b80\u8005\u662f\u81fa\u7063\u7684\u53d7\u773e\uff0c\u672c\u66f8\u50c5\u6d89\u53ca\u5230ASCII\u82f1\u6587\u5b57\u6bcd\u2014\u2014\u9802\u591a\u52a0\u4e9b\u4e00\u4e9b\u9644\u52a0\u7b26\u865f(diacritics)\u548c\u6f22\u5b57\u7684\u6392\u7248\u3002\u5176\u4ed6\u7684\u529f\u80fd\u5e0c\u671b\u8b80\u8005\u53ef\u4ee5\u6f38\u6b21\u7531\u5c11\u6f38\u591a\u7684\u9644\u52a0\u3002\u53e6\u5916\u9019\u908a\u6703\u4f7f\u7528\u5230\u4e00\u4e9bLISP\u7684\u8868\u9054\u5f0f\u4f86\u8868\u9054\u62bd\u8c61\u8a9e\u6cd5\u6a39\uff0c\u82e5\u662f\u4e0d\u61c2\u7684\u8a71\uff0c\u53ef\u4ee5\u770b\u4e00\u9ede\u6559 Lisp\u6216\u662fScheme\u7684\u66f8\uff0c\u5982SICP\u3002\u53e6\u5916\u9019\u672c\u66f8\u4e0d\u662f\u7de8\u8b6f\u539f\u7406\u548c\u63cf\u8ff0PDF\u898f\u683c\u7684\u66f8\uff0c\u4e0d\u6d89\u7375\u5e95\u5c64\u7684\u77e5\u8b58\uff0c\u6709\u9700\u8981\u7684\u53ef\u4ee5\u53c3\u8003\u76f8\u95dc\u9818\u57df\u7684\u66f8\u3002","title":"\u5e8f\u8a00"},{"location":"#_3","text":"\u9019\u4e0d\u662f\u6559\u4e00\u4f4d\u5165\u9580\u4f7f\u7528\u8005\u5982\u5f9e\u96f6\u77e5\u8b58\u64b0\u5beb\u6392\u7248\u8edf\u9ad4\u7684\u66f8\uff0c\u8b80\u8005\u61c9\u8a72\u6709\u77e5\u9053\u5982\u4f55\u4f7f\u7528\u975c\u614b\u578b\u5225\u8a9e\u8a00\u7684\u7d93\u9a57\uff0c\u6bd4\u5982\u4e00\u9edeC\u3001\u6216\u662fRust\u7b49\u7b49\u3002\u53e6\u5916\u62bd\u8c61\u8a9e\u6cd5\u6a39\u70ba\u6c42\u65b9\u4fbf\uff0c\u4f7f\u7528LISP\u64b0\u5beb\uff0c\u6240\u4ee5\u9700\u8981\u6703LISP\u548cScheme\u7684\u77e5\u8b58\uff08\u77e5\u540d\u6559\u79d1\u66f8SICP\u7684\u958b\u982d\u53ef\u4ee5\u8b80\u4e00\u8b80\uff09\u3002 \u9019\u672c\u66f8\u4e5f\u4e0d\u6559\u7de8\u8b6f\u7406\u8ad6\u548ctokenizing\u3001parsing\u3001\u72c0\u614b\u6a5f\u7b49\u7b49\u7684\uff0c\u9802\u591a\u53ea\u6703\u5e36\u5230\u4e00\u4e9b\u5f88\u57fa\u790e\u7684\u77e5\u8b58\uff0c\u6709\u9700\u8981\u7684\u8acb\u53e6\u5916\u518d\u8b80\u3002\u6240\u4ee5\u4f7f\u7528\u8005\u9700\u8981\u6703\u6709\u4f7f\u7528\u6b63\u898f\u8868\u9054\u5f0f(regex)\u7684\u80fd\u529b\u3002 \u64cd\u4f5c\u74b0\u5883\u4f7f\u7528Linux\u3002\u9700\u8981\u5b89\u88ddfontconfig\u7b49\u5957\u4ef6\u3002 \u5b9a\u7fa9\u62bd\u8c61\u8a9e\u6cd5\u6a39\u548c\u8a9e\u6cd5","title":"\u5148\u5099\u77e5\u8b58"},{"location":"defineASTandGrammar/","text":"Ch1 \u5b9a\u7fa9\u62bd\u8c61\u8a9e\u6cd5\u6a39\u548c\u8a9e\u6cd5 \u62bd\u8c61\u8a9e\u6cd5\u6a39 C\u8a9e\u8a00\u3001Python\u8a9e\u8a00\u5c31\u7b97\u6709\u8a31\u591a\u7684\u95dc\u9375\u5b57\u3001\u64cd\u4f5c\u7b26\u3001\u7b26\u865f\u6216\u662f\u5e38\u6578\u8b8a\u6578\uff0c\u5728\u7de8\u8b6f\u5668\u5206\u6790\u8a9e\u6cd5\u4ee5\u5f8c\uff0c\u6700\u5f8c\u6703\u8f49\u6210\u7de8\u8b6f\u5668\u53ef\u4ee5\u64cd\u4f5c\u7684\u6a39\u7d50\u69cb\uff0c\u7136\u5f8c\u518d\u8f49\u6210\u6211\u5011\u60f3\u8981\u7684\u53e6\u4e00\u500b\u8a9e\u8a00\u7684\u6a39\uff0c\u6700\u5f8c\u8f38\u51fa\u53e6\u4e00\u500b\u8a9e\u8a00\u7684\u7a0b\u5f0f\u78bc\u3002 \u4f46\u662f\u4ec0\u9ebc\u53eb\u505a\u62bd\u8c61\u8a9e\u6cd5\u6a39\u5462\uff1f\u6211\u5011\u5148\u5f9e\u4e00\u9ede\u53e5\u6cd5\u77e5\u8b58\u4f86\u8ac7\u3002 \u5b78\u904e\u4e2d\u5b78\u570b\u6587\u6587\u6cd5\u7684\u8ab2\u7a0b\uff0c\u6703\u80cc\u4e00\u5806\u985e\u4f3c\u300c\u4e3b\u8a5e+\u52d5\u8a5e+\u53d7\u8a5e\u300d\u3001\u300c\u4e3b\u8a5e+(\u6709/\u7121)+\u53d7\u8a5e\u300d\u7684\u7d50\u69cb\u3002\u53ef\u4ee5\u63db\u500b\u8aaa\u6cd5\uff0c\u662f\u53e5\u5b50=\u300c\u4e3b\u8a5e+\u52d5\u8a5e+\u53d7\u8a5e\u300d\u6216\u662f\u300c\u4e3b\u8a5e+(\u6709/\u7121)+\u8cd3\u8a5e\u300d\u7684\u5f62\u5f0f\u3002\u6211\u5011\u5c07\u300c=\u300d\u5beb\u6210\u300c::=\u300d\uff0c\u300c/\u300d\uff08\u6216\u662f\uff09\u5beb\u6210\u300c|\u300d\uff0c\u300c\u52d5\u8a5e\u300d\u64f4\u5145\u8b8a\u6210\u300c\u52d5\u8a5e\u7247\u8a9e\u300d\uff0c\u5c31\u8b8a\u6210\uff1a \u53e5\u5b50 ::= (\u4e3b\u8a5e \u52d5\u8a5e\u7247\u8a9e \u53d7\u8a5e) | (\u4e3b\u8a5e (\u6709 | \u7121) \u53d7\u8a5e)... \u70ba\u4e86\u6613\u8b80\u6240\u4ee5\u5beb\u6210\uff1a \u53e5\u5b50 ::= \u4e3b\u8a5e \u52d5\u8a5e\u7247\u8a9e \u53d7\u8a5e | \u4e3b\u8a5e (\u6709 | \u7121) \u53d7\u8a5e | ... \u7528\u9019\u7a2e\u5f62\u5f0f\u8868\u793a\u7684\u8a9e\u8a00\u53e5\u6cd5\uff0c\u53eb\u505a\u300cBNF\u6587\u6cd5\u300d\u3002\u9019\u7a2e\u53e5\u6cd5\u770b\u8d77\u4f86\u5f88\u8a9e\u8a00\u5b78\uff0c\u4f46\u662f\u6211\u5011\u60f3\uff1a\u53d7\u8a5e\u548c\u4e3b\u8a5e\u53ef\u4ee5\u70ba\u540d\u8a5e\u3001\u5c08\u6709\u540d\u8a5e\u6216\u662f\u300c\u5f62\u5bb9\u8a5e+\u540d\u8a5e\u300d\uff1b\u52d5\u8a5e\u7247\u8a9e\u53ef\u4ee5\u70ba\u52d5\u8a5e\u6216\u662f\u300c\u526f\u8a5e+\u52d5\u8a5e\u300d\u3002\u56e0\u6b64\u9019\u6a23\u4e4b\u898f\u5247\uff0c\u5c31\u53ef\u4ee5\u751f\u6210\u8a31\u591a\u53e5\u5b50\uff0c\u6bd4\u5982\u300c\u6211\u6709\u7b46\u300d\u3001\u300c\u5f35\u4e09\u990a\u8c93\u300d\u3001\u300c\u5c0f\u82b3\u6162\u6162\u79fb\u52d5\u6aaf\u71c8\u300d\u7b49\u7b49\u7684\u53e5\u5b50\u3002\u7136\u5f8c\u53e5\u5b50\u53ef\u4ee5\u7528\u4e0a\u8ff0\u898f\u5247\uff0c\u5206\u6790\u6210\u8a9e\u6cd5\u7684\u6a39\u72c0\u7d50\u69cb\uff0c\u5982\u4e0b\u5716\u628a\u300c\u6211\u66fe\u65c5\u5c45\u65b0\u7af9\u300d\u5beb\u6210\u8a9e\u6cd5\u6a39\u3002 \u300c\u6211\u66fe\u65c5\u5c45\u65b0\u7af9\u300d\u7684\u8a9e\u6cd5\u6a39 \u540c\u7406\uff0c\u7a0b\u5f0f\u8a9e\u8a00\u901a\u5e38\u4e5f\u6709\u66f4\u56b4\u8b39\u7684\u9019\u6a23\u751f\u6210\u6587\u6cd5\uff0c\u53ef\u4ee5\u7528\u5e7e\u500b\u7c21\u55ae\u898f\u5247\u751f\u51fa\u7e41\u591a\u7684\u7a0b\u5f0f\u78bc\uff0c\u800c\u4e14\u5408\u4e4e\u8a9e\u6cd5\u898f\u5b9a\u3002\u9019\u7a2e\u751f\u6210\u6587\u6cd5\u4e5f\u53ef\u6aa2\u67e5\u8f38\u5165\u7684\u7a0b\u5f0f\u78bc\u6709\u6c92\u6709\u7b26\u5408\u53e5\u6cd5\u7684\u898f\u5b9a\u3002\u800c\u9019\u7a2e\u8a9e\u6cd5\u751f\u6210\u7684\u7a0b\u5f0f\u78bc\uff0c\u53bb\u6389\u4e0d\u9700\u8981\u7684\u9017\u865f\u7b49\u7b49\u7b26\u865f\uff0c\u7576\u7136\u4e5f\u53ef\u4ee5\u505a\u6210\u8a9e\u6cd5\u6a39\uff0c\u5c31\u662f\u62bd\u8c61\u8a9e\u6cd5\u6a39 (abstract syntax tree, AST)\uff0c\u5982\u4e0b\u5716\u6240\u793a\u3002 \u300c(2+2) == 4\u300d\u7684\u8a9e\u6cd5\u6a39\u3002\u6ce8\u610f\u62ec\u865f\u5df2\u7d93\u522a\u9664\u3002 \u800c\u4e0a\u6587\u7684\u62bd\u8c61\u8a9e\u6cd5\u6a39\uff0c\u53ef\u4ee5\u662f\u6211\u5011\u628a\u7a0b\u5f0f\u7d93\u904e\u7de8\u8b6f\u5668\u5206\u6790\u4e4b\u5f8c\uff0c\u7528\u300c\u6a39\u300d\u5132\u5b58\u7684\u8cc7\u6599\u7d50\u69cb\u3002\u800c\u6a39\u5f62\u7d50\u69cb\u6211\u5011\u53ef\u4ee5\u4f7f\u7528Lisp\u8a9e\u8a00\u7684S\u8868\u9054\u5f0f(S-expressiom; S-exp)\u4f86\u8868\u793a\uff0c\u672c\u6587\u63a1\u7528\u9019\u6a23\u7684\u8868\u793a\u65b9\u6cd5\u3002\u6240\u4ee5\u4e0a\u6587\u7684 (2+2)==4 \u5373 (== (+ 2 2) 4) \uff1b let baz = foo(\"bar\") \uff0c\u82e5\u662f\u628afoo(\"bar\")\u9019\u7a2e\u51fd\u6578\u5957\u7528(apply)\u5beb\u6210 (APPLY foo \"bar\") \uff0c\u5247\u5176S-exp\u8a9e\u6cd5\u6a39\u53ef\u5beb\u70ba (let baz(APPLY foo \"bar\")) \u3002 \u6c7a\u5b9a\u8a9e\u6cd5 \u90a3\u6211\u5011\u8981\u5982\u4f55\u5236\u5b9a\u9019\u500b\u8a9e\u8a00\u7684\u8a9e\u6cd5\uff0c\u9019\u6a23\u6211\u5011\u624d\u80fd\u5920\u5beb\u51fa\u7b26\u5408\u9019\u500b\u8a9e\u6cd5\u7684\u51fd\u6578\uff0c\u7136\u5f8c\u518d\u7528tokenizer\u548cparser\u8f49\u6210AST\u6a39\u3002 \u4e0d\u8003\u616e + - * / \u9019\u7a2e\u904b\u7b97\u5b50\uff0c\u4ee5\u53ca\u5411\u91cf\u7684\u8868\u793a\u5b50\uff0c\u51fd\u6578\u53ef\u4ee5\u7528 ID(arg1, arg2, ...) \u9019\u7a2e\u65b9\u5f0f\u4f86\u8868\u793a\uff0c\u5176\u4e2d arg_x \u662f\u5f15\u6578\uff0c ID \u662f\u8b58\u5225\u5b50\uff08identifier\uff0c\u53ef\u4ee5\u628a\u5b83\u60f3\u6210\u8b8a\u51fd\u6578\u7684\u540d\u5b57\uff09\u3002 \u8b8a\u6578\u53ef\u4ee5\u662f ID \uff0c arg_n \u53ef\u4ee5\u662f ID \u6216\u5e38\u6578\uff08\u91cf\uff09\u3002 \u5e38\u6578\uff08\u91cf\uff09\u7684\u8868\u793a\u6cd5\u53ef\u4ee5\u662f\u4e0b\u5217\u4efb\u4e00\uff1a \u6d6e\u9ede\u6578\u59820.0, 36.8\uff0cBNF\u98a8\u683c\u7684\u8868\u9054\u6cd5\u70ba\uff1a [0-9]+ '.' [0-9]+ \u3002 'c' \u6307c\u9019\u500b\u6587\u5b57\uff0c + \u8868\u793a\u524d\u9762\u7684\u91cd\u89071\u6b21\u4ee5\u4e0a\uff1b [0-9] \u8868\u793a\u6578\u5b570\u52309\u3002 \u6574\u6578\u598222\u30010\uff1a [0-9]+ \u5b57\u4e32\uff1a '\"' (\u4e0d\u662f\u300c\"\u300d\u7684\u4efb\u4e00\u5b57\u5143|('\\' '\"')) '\"' \uff08 . \u8868\u793a\u4efb\u4f55\u4e00\u500b\u5b57\u5143\uff09 \u7136\u800c\u6211\u5011\u9084\u662f\u9700\u8981\u7d81\u5b9a\u8b8a\u6578 let x = var in boby \uff08\u5728 body \u88e1\u9762\uff0c x \u6307\u4ee3 var \uff09\u3001 set x = var \uff08\u6539\u8b8a\u8b8a\u6578\u503c\uff09\u3001lambda lambda (x)=>{body} \u3002\u53e6\u5916\u70ba\u4e86\u8981\u5340\u5225\u8981\u5728PDF\u5370\u4e0a\u53bb\u7684\u4e00\u822c\u5b57\u5143\uff0c\u5728\u9019\u500b\u6a94\u6848\u7684\u5e38\u6578\u3001\u8b8a\u6578\u3001\u51fd\u6578\u3001\u95dc\u9375\u5b57\u7b49\u524d\u5f8c\u9700\u8981\u52a0@\u8868\u793a\uff08\u4f46\u662f\u51fd\u6578\u3001lambda\u88e1\u9762\u7684\u8b8a\u6578\u4e0d\u7528\uff09\u3002\u6bd4\u5982 @foo(a, b)@ \u3001 @lambda(x)@ \u3001 @\"IAmAString\"@ \u3001 @2.2@ \u3001 @3@ \uff08\u5f8c\u4e09\u8005\u61c9\u8a72\u5f88\u5c11\u7528\u5230\uff09\u53ef\u662f\u82e5\u9700\u5728PDF\u5370 @ \u6642\u600e\u8fa6\uff1f\u90a3\u5c31\u7528 \\@ \u3002\u6bd4\u5982 foo\\@example.com \u3002 \u6240\u4ee5\u6211\u5011\u53ef\u4ee5\u5b9a\u7fa9\u4ee5\u4e0b\u7684BNF\u98a8\u6587\u6cd5\uff1a Language ::= PrintTxt | Exprs PrintTxt ::= (('\\' '@')| \u975e@\u5b57\u5143)+ //\u300c\u6211\u662f\u4e00\u96bb\u8c93\u300d\u6216\u662f\u300cwww\\@example.com\u300d Exprs ::= @ Expr* @ // *\u8868\u793a\u524d\u9762\u7684\u91cd\u89070\u6b21\u4ee5\u4e0a\uff08\u5305\u542b\u4e0d\u51fa\u73fe\uff09 Expr ::= (Letting | Setting | Lambda | Apply | Var| Const) | \"(\" Expr \")\" Letting ::= \"let\" Var \"=\" Expr \"in\" Expr // let foo = 12 in ... Setting ::= Var \":=\" Expr \"in\" Expr // foo := a in ... Lambda ::= \"fn\" Var \"->\" Expr // fn x -> 12 Apply ::= Expr Expr // foo 3 \u5373foo(3) Var ::= ID Const ::= String | Float | Int Int ::= [0-9]+ Float ::= [0-9]+ \".\" [0-9]+ String ::= '\"' (\u4e0d\u662f\u300c\"\u300d\u7684\u4efb\u4e00\u5b57\u5143|('\\' '\"')) '\"' \u7528ParserCombinator\u9032\u884ctokenize Parser combinator\uff08\u5206\u6790\u5668\u7d44\u5408\u5b50\uff09\u662f\u4e00\u7a2e\u5229\u7528\u9ad8\u968e\u51fd\u6578\u4f86\u7c21\u5316\u5206\u6790\u5668\u64b0\u5beb\u7684\u8fa6\u6cd5\u3002\u8b1b\u4e00\u500b\u7c21\u55ae\u7684\u6848\u4f8b\u5427\uff1a \u5047\u8a2d\u6211\u5011\u60f3\u8981\u5c07\u5b57\u4e32\u7684\u958b\u982dmatch 0~9 \u4e4b\u4e2d\u7684\u5176\u4e2d\u4e00\u500b\uff0c\u6211\u5011\u53ef\u4ee5\u5beb\u4e00\u500b\u51fd\u6578match0to9\u5982\u4e0b\uff1a function match0to9(string){ if (string[0] in 0,1,..,9){ let rest = string[1:]; let matched = string[0]; return {type: \"OK\", rest : rest, matched : matched}; } else{ return {type : \"Nothing\"}; } } \u5047\u8a2d\u6211\u5011\u8981\u5c07\u5b57\u4e32\u7684\u524d\u5169\u500b\u5b57\u7684match 0~9\u5462\uff1f\u5982\u679c\u6703\u9ad8\u968e\u51fd\u6578\u7684\u8a71\uff0c\u5f15\u5165\u4e00\u500b then \u51fd\u6578\uff0c\u7136\u5f8c\u628a match0to9 \u50b3\u9032\u53bb\uff0c\u9019\u6a23\u5beb\u8d77\u4f86\u6bd4\u8f03\u7c21\u6f54\uff1a function thenDo(input, fun){ if (input.type != \"Nothing\"{ middle = fun(input.rest); if (middle.type != \"Nothing\"){ middle.matched = input.matched + middle.matched return middle; }else{ return middle; // return nothing } }else{ input; // return nothing } } \u5e73\u9762\u64cd\u4f5c \u57fa\u672c\u51fd\u6578\u8207\u76f4\u8b6f\u5668 \u6211\u5011\u85c9\u7531\u4ee5\u4e0a\u7684\u6982\u5ff5\uff0c\u53ef\u4ee5\u5b9a\u7fa9\u4e00\u500b\u5c07\u6587\u5b57\u3001\u7dda\u689d\u7b49\u5f62\u72c0\u6392\u5217\u52302D\u5e73\u9762\u7684\u8a9e\u6cd5\uff0c\u7562\u7adf\u4e0d\u8ad6\u8f38\u51faPDF\u3001SVG\u7b49\u7b49\uff0c\u7c97\u7565\u800c\u8a00\uff0c\u5c31\u662f\u4e00\u7a2e2D\u5e73\u9762\u5b89\u653e\u6587\u5b57\u7684\u8a9e\u8a00\u3002\u53e6\u5916PDF\u7684\u683c\u5f0f\u76f8\u7576\u6666\u6f80\uff0c\u5c31\u7b97_PDF Explained_\u7684PDF\u6559\u5b78\uff0c\u4e5f\u9084\u662f\u8981\u8f14\u52a9\u4f7f\u7528\u5176\u4ed6\u7684\u5de5\u5177\uff0c\u6c92\u8fa6\u6cd5\u770b\u4e86\u5c31\u81ea\u5df1\u624b\u523bPDF\uff0c\u6240\u4ee5\u9084\u662f\u7528 printpdf \u4f86\u6559\u5b78\u5427\u3002 \u73fe\u5728\u6211\u5011\u521d\u59cb\u5316\u4e00\u500b\u5c08\u6848\u76ee\u9304\uff0c\u7136\u5f8c\u5c07\u9700\u8981\u7684S-exp\u51fd\u5f0f\u5eab\u548cpdf\u51fd\u6578\u5eab\u6307\u5b9a\u70ba\u76f8\u4f9d\u51fd\u5f0f\u5eab\uff1a cargo init; cargo add rsexp printpdf; \u6211\u5011\u53ef\u4ee5\u5b9a\u7fa9\u4e00\u4e9b\u8868\u9054\u5f0f\uff08\u5305\u542b\u51fd\u6578\u3001\u8cc7\u6599\u7d50\u69cb\uff0cS-exp\u5f62\u5f0f\uff09\u7684\u8aaa\u660e\u5982\u4e0b\u3002 '() \u8868\u793a\u7a7a\u5217\u8868(empty list)\uff0c\u56e0\u70ba\u90fd\u8981\u8868\u9054\u662f\u51fd\u6578\u7684\u5f15\u7528\uff0c\u6240\u6709\u7684\u51fd\u6578\u5beb\u6210\u5f62\u5f0f (Func \"\u51fd\u6578\u540d\u7a31\" (\u5f15\u65781 \u5f15\u65782 ....)) \u3002Float\u630764\u4f4d\u5143\u6d6e\u9ede\u6578\uff1a (px Float) ; px\u8868\u9054pixel\u55ae\u4f4d\uff0c\u5132\u5b58\u6d6e\u9ede\u6578 (pt Float) ; pt\u8868\u9054point\u55ae\u4f4d\uff0c\u5132\u5b58\u6d6e\u9ede\u6578 (style (str pt)) ; \u6587\u5b57\u6a23\u5f0f\u3002String\u8868\u793a\u5b57\u578b\u7684\u8def\u5f91[fontPath]\uff0cFloat\u8868\u793a\u5b57\u578b\u5927\u5c0f(in Pt) (fontSize) (str String) ; \u5132\u5b58\u5b57\u4e32 (func \"createPDF\" '()) ;\u65b0\u589ePDF (func \"createPage\" '()) ;\u65b0\u589e\u9801\u9762 (func \"writePdf\" '(str)) ;\u5beb\u5165PDF\u9801\u9762\uff0cString\u662fPATH (func \"putchar\" '(str style x y)) ; x \u8ef8\u5411\u53f3\uff0cy \u8ef8\u5411\u4e0b\uff0cstr \u8868\u793a\u5b57\u5143(char)\uff0cstyle \u8868\u793a\u6587\u5b57\u6a23\u5f0f main.rs \u5148\u5f15\u7528\u51fd\u5f0f\u5eab\uff1a use printpdf::*; \u5176\u4e2d px \u3001 pt \u662f\u55ae\u4f4d\uff0c\u6240\u4ee5\u53ef\u4ee5\u5728 main.rs \u9019\u6a23\u5b9a\u7fa9\uff1a enum Measure{ Pt(f64), Px(f64) } \u6700\u5f8c\u4e00\u6b21\u5b9a\u7fa9expression\uff1a enum Expr{ Mea(Measure), // wrapper for measure Str(&str), Style{font_path : Measure, size : Measure}, Func(&str, Vec<Expr>), Void // return nothing } \u7136\u5f8c\u6211\u5011\u53ef\u4ee5\u9019\u6a23\u5b9a\u7fa9\u4e00\u500b\u8655\u7406\u8f38\u5165\u8f38\u51fa\u7684interpreter\u65bc interp \uff0c\u4e26\u4fee\u6539 main.rs \u5982\u4e0b\uff0c\u7e31\u4f7f\u6211\u5011\u6e96\u6642\uff1a fn interp(exp : Expr)->(){ // the function will be extended. match exp { Expr::Mea(Measure::Pt(x)) => println!(\"{:?} pt\", x), Expr::Mea(Measure::Px(x)) => println!(\"{:?} px\", x), _ => println!(\"not found expression\"), }; } // exexute interpreter fn main() { interp(Expr::Mea(Measure::Pt(2.2))); interp(Expr::Flo(2.2)); }","title":"Ch 1"},{"location":"defineASTandGrammar/#ch1","text":"","title":"Ch1 \u5b9a\u7fa9\u62bd\u8c61\u8a9e\u6cd5\u6a39\u548c\u8a9e\u6cd5"},{"location":"defineASTandGrammar/#_1","text":"C\u8a9e\u8a00\u3001Python\u8a9e\u8a00\u5c31\u7b97\u6709\u8a31\u591a\u7684\u95dc\u9375\u5b57\u3001\u64cd\u4f5c\u7b26\u3001\u7b26\u865f\u6216\u662f\u5e38\u6578\u8b8a\u6578\uff0c\u5728\u7de8\u8b6f\u5668\u5206\u6790\u8a9e\u6cd5\u4ee5\u5f8c\uff0c\u6700\u5f8c\u6703\u8f49\u6210\u7de8\u8b6f\u5668\u53ef\u4ee5\u64cd\u4f5c\u7684\u6a39\u7d50\u69cb\uff0c\u7136\u5f8c\u518d\u8f49\u6210\u6211\u5011\u60f3\u8981\u7684\u53e6\u4e00\u500b\u8a9e\u8a00\u7684\u6a39\uff0c\u6700\u5f8c\u8f38\u51fa\u53e6\u4e00\u500b\u8a9e\u8a00\u7684\u7a0b\u5f0f\u78bc\u3002 \u4f46\u662f\u4ec0\u9ebc\u53eb\u505a\u62bd\u8c61\u8a9e\u6cd5\u6a39\u5462\uff1f\u6211\u5011\u5148\u5f9e\u4e00\u9ede\u53e5\u6cd5\u77e5\u8b58\u4f86\u8ac7\u3002 \u5b78\u904e\u4e2d\u5b78\u570b\u6587\u6587\u6cd5\u7684\u8ab2\u7a0b\uff0c\u6703\u80cc\u4e00\u5806\u985e\u4f3c\u300c\u4e3b\u8a5e+\u52d5\u8a5e+\u53d7\u8a5e\u300d\u3001\u300c\u4e3b\u8a5e+(\u6709/\u7121)+\u53d7\u8a5e\u300d\u7684\u7d50\u69cb\u3002\u53ef\u4ee5\u63db\u500b\u8aaa\u6cd5\uff0c\u662f\u53e5\u5b50=\u300c\u4e3b\u8a5e+\u52d5\u8a5e+\u53d7\u8a5e\u300d\u6216\u662f\u300c\u4e3b\u8a5e+(\u6709/\u7121)+\u8cd3\u8a5e\u300d\u7684\u5f62\u5f0f\u3002\u6211\u5011\u5c07\u300c=\u300d\u5beb\u6210\u300c::=\u300d\uff0c\u300c/\u300d\uff08\u6216\u662f\uff09\u5beb\u6210\u300c|\u300d\uff0c\u300c\u52d5\u8a5e\u300d\u64f4\u5145\u8b8a\u6210\u300c\u52d5\u8a5e\u7247\u8a9e\u300d\uff0c\u5c31\u8b8a\u6210\uff1a \u53e5\u5b50 ::= (\u4e3b\u8a5e \u52d5\u8a5e\u7247\u8a9e \u53d7\u8a5e) | (\u4e3b\u8a5e (\u6709 | \u7121) \u53d7\u8a5e)... \u70ba\u4e86\u6613\u8b80\u6240\u4ee5\u5beb\u6210\uff1a \u53e5\u5b50 ::= \u4e3b\u8a5e \u52d5\u8a5e\u7247\u8a9e \u53d7\u8a5e | \u4e3b\u8a5e (\u6709 | \u7121) \u53d7\u8a5e | ... \u7528\u9019\u7a2e\u5f62\u5f0f\u8868\u793a\u7684\u8a9e\u8a00\u53e5\u6cd5\uff0c\u53eb\u505a\u300cBNF\u6587\u6cd5\u300d\u3002\u9019\u7a2e\u53e5\u6cd5\u770b\u8d77\u4f86\u5f88\u8a9e\u8a00\u5b78\uff0c\u4f46\u662f\u6211\u5011\u60f3\uff1a\u53d7\u8a5e\u548c\u4e3b\u8a5e\u53ef\u4ee5\u70ba\u540d\u8a5e\u3001\u5c08\u6709\u540d\u8a5e\u6216\u662f\u300c\u5f62\u5bb9\u8a5e+\u540d\u8a5e\u300d\uff1b\u52d5\u8a5e\u7247\u8a9e\u53ef\u4ee5\u70ba\u52d5\u8a5e\u6216\u662f\u300c\u526f\u8a5e+\u52d5\u8a5e\u300d\u3002\u56e0\u6b64\u9019\u6a23\u4e4b\u898f\u5247\uff0c\u5c31\u53ef\u4ee5\u751f\u6210\u8a31\u591a\u53e5\u5b50\uff0c\u6bd4\u5982\u300c\u6211\u6709\u7b46\u300d\u3001\u300c\u5f35\u4e09\u990a\u8c93\u300d\u3001\u300c\u5c0f\u82b3\u6162\u6162\u79fb\u52d5\u6aaf\u71c8\u300d\u7b49\u7b49\u7684\u53e5\u5b50\u3002\u7136\u5f8c\u53e5\u5b50\u53ef\u4ee5\u7528\u4e0a\u8ff0\u898f\u5247\uff0c\u5206\u6790\u6210\u8a9e\u6cd5\u7684\u6a39\u72c0\u7d50\u69cb\uff0c\u5982\u4e0b\u5716\u628a\u300c\u6211\u66fe\u65c5\u5c45\u65b0\u7af9\u300d\u5beb\u6210\u8a9e\u6cd5\u6a39\u3002 \u300c\u6211\u66fe\u65c5\u5c45\u65b0\u7af9\u300d\u7684\u8a9e\u6cd5\u6a39 \u540c\u7406\uff0c\u7a0b\u5f0f\u8a9e\u8a00\u901a\u5e38\u4e5f\u6709\u66f4\u56b4\u8b39\u7684\u9019\u6a23\u751f\u6210\u6587\u6cd5\uff0c\u53ef\u4ee5\u7528\u5e7e\u500b\u7c21\u55ae\u898f\u5247\u751f\u51fa\u7e41\u591a\u7684\u7a0b\u5f0f\u78bc\uff0c\u800c\u4e14\u5408\u4e4e\u8a9e\u6cd5\u898f\u5b9a\u3002\u9019\u7a2e\u751f\u6210\u6587\u6cd5\u4e5f\u53ef\u6aa2\u67e5\u8f38\u5165\u7684\u7a0b\u5f0f\u78bc\u6709\u6c92\u6709\u7b26\u5408\u53e5\u6cd5\u7684\u898f\u5b9a\u3002\u800c\u9019\u7a2e\u8a9e\u6cd5\u751f\u6210\u7684\u7a0b\u5f0f\u78bc\uff0c\u53bb\u6389\u4e0d\u9700\u8981\u7684\u9017\u865f\u7b49\u7b49\u7b26\u865f\uff0c\u7576\u7136\u4e5f\u53ef\u4ee5\u505a\u6210\u8a9e\u6cd5\u6a39\uff0c\u5c31\u662f\u62bd\u8c61\u8a9e\u6cd5\u6a39 (abstract syntax tree, AST)\uff0c\u5982\u4e0b\u5716\u6240\u793a\u3002 \u300c(2+2) == 4\u300d\u7684\u8a9e\u6cd5\u6a39\u3002\u6ce8\u610f\u62ec\u865f\u5df2\u7d93\u522a\u9664\u3002 \u800c\u4e0a\u6587\u7684\u62bd\u8c61\u8a9e\u6cd5\u6a39\uff0c\u53ef\u4ee5\u662f\u6211\u5011\u628a\u7a0b\u5f0f\u7d93\u904e\u7de8\u8b6f\u5668\u5206\u6790\u4e4b\u5f8c\uff0c\u7528\u300c\u6a39\u300d\u5132\u5b58\u7684\u8cc7\u6599\u7d50\u69cb\u3002\u800c\u6a39\u5f62\u7d50\u69cb\u6211\u5011\u53ef\u4ee5\u4f7f\u7528Lisp\u8a9e\u8a00\u7684S\u8868\u9054\u5f0f(S-expressiom; S-exp)\u4f86\u8868\u793a\uff0c\u672c\u6587\u63a1\u7528\u9019\u6a23\u7684\u8868\u793a\u65b9\u6cd5\u3002\u6240\u4ee5\u4e0a\u6587\u7684 (2+2)==4 \u5373 (== (+ 2 2) 4) \uff1b let baz = foo(\"bar\") \uff0c\u82e5\u662f\u628afoo(\"bar\")\u9019\u7a2e\u51fd\u6578\u5957\u7528(apply)\u5beb\u6210 (APPLY foo \"bar\") \uff0c\u5247\u5176S-exp\u8a9e\u6cd5\u6a39\u53ef\u5beb\u70ba (let baz(APPLY foo \"bar\")) \u3002","title":"\u62bd\u8c61\u8a9e\u6cd5\u6a39"},{"location":"defineASTandGrammar/#_2","text":"\u90a3\u6211\u5011\u8981\u5982\u4f55\u5236\u5b9a\u9019\u500b\u8a9e\u8a00\u7684\u8a9e\u6cd5\uff0c\u9019\u6a23\u6211\u5011\u624d\u80fd\u5920\u5beb\u51fa\u7b26\u5408\u9019\u500b\u8a9e\u6cd5\u7684\u51fd\u6578\uff0c\u7136\u5f8c\u518d\u7528tokenizer\u548cparser\u8f49\u6210AST\u6a39\u3002 \u4e0d\u8003\u616e + - * / \u9019\u7a2e\u904b\u7b97\u5b50\uff0c\u4ee5\u53ca\u5411\u91cf\u7684\u8868\u793a\u5b50\uff0c\u51fd\u6578\u53ef\u4ee5\u7528 ID(arg1, arg2, ...) \u9019\u7a2e\u65b9\u5f0f\u4f86\u8868\u793a\uff0c\u5176\u4e2d arg_x \u662f\u5f15\u6578\uff0c ID \u662f\u8b58\u5225\u5b50\uff08identifier\uff0c\u53ef\u4ee5\u628a\u5b83\u60f3\u6210\u8b8a\u51fd\u6578\u7684\u540d\u5b57\uff09\u3002 \u8b8a\u6578\u53ef\u4ee5\u662f ID \uff0c arg_n \u53ef\u4ee5\u662f ID \u6216\u5e38\u6578\uff08\u91cf\uff09\u3002 \u5e38\u6578\uff08\u91cf\uff09\u7684\u8868\u793a\u6cd5\u53ef\u4ee5\u662f\u4e0b\u5217\u4efb\u4e00\uff1a \u6d6e\u9ede\u6578\u59820.0, 36.8\uff0cBNF\u98a8\u683c\u7684\u8868\u9054\u6cd5\u70ba\uff1a [0-9]+ '.' [0-9]+ \u3002 'c' \u6307c\u9019\u500b\u6587\u5b57\uff0c + \u8868\u793a\u524d\u9762\u7684\u91cd\u89071\u6b21\u4ee5\u4e0a\uff1b [0-9] \u8868\u793a\u6578\u5b570\u52309\u3002 \u6574\u6578\u598222\u30010\uff1a [0-9]+ \u5b57\u4e32\uff1a '\"' (\u4e0d\u662f\u300c\"\u300d\u7684\u4efb\u4e00\u5b57\u5143|('\\' '\"')) '\"' \uff08 . \u8868\u793a\u4efb\u4f55\u4e00\u500b\u5b57\u5143\uff09 \u7136\u800c\u6211\u5011\u9084\u662f\u9700\u8981\u7d81\u5b9a\u8b8a\u6578 let x = var in boby \uff08\u5728 body \u88e1\u9762\uff0c x \u6307\u4ee3 var \uff09\u3001 set x = var \uff08\u6539\u8b8a\u8b8a\u6578\u503c\uff09\u3001lambda lambda (x)=>{body} \u3002\u53e6\u5916\u70ba\u4e86\u8981\u5340\u5225\u8981\u5728PDF\u5370\u4e0a\u53bb\u7684\u4e00\u822c\u5b57\u5143\uff0c\u5728\u9019\u500b\u6a94\u6848\u7684\u5e38\u6578\u3001\u8b8a\u6578\u3001\u51fd\u6578\u3001\u95dc\u9375\u5b57\u7b49\u524d\u5f8c\u9700\u8981\u52a0@\u8868\u793a\uff08\u4f46\u662f\u51fd\u6578\u3001lambda\u88e1\u9762\u7684\u8b8a\u6578\u4e0d\u7528\uff09\u3002\u6bd4\u5982 @foo(a, b)@ \u3001 @lambda(x)@ \u3001 @\"IAmAString\"@ \u3001 @2.2@ \u3001 @3@ \uff08\u5f8c\u4e09\u8005\u61c9\u8a72\u5f88\u5c11\u7528\u5230\uff09\u53ef\u662f\u82e5\u9700\u5728PDF\u5370 @ \u6642\u600e\u8fa6\uff1f\u90a3\u5c31\u7528 \\@ \u3002\u6bd4\u5982 foo\\@example.com \u3002 \u6240\u4ee5\u6211\u5011\u53ef\u4ee5\u5b9a\u7fa9\u4ee5\u4e0b\u7684BNF\u98a8\u6587\u6cd5\uff1a Language ::= PrintTxt | Exprs PrintTxt ::= (('\\' '@')| \u975e@\u5b57\u5143)+ //\u300c\u6211\u662f\u4e00\u96bb\u8c93\u300d\u6216\u662f\u300cwww\\@example.com\u300d Exprs ::= @ Expr* @ // *\u8868\u793a\u524d\u9762\u7684\u91cd\u89070\u6b21\u4ee5\u4e0a\uff08\u5305\u542b\u4e0d\u51fa\u73fe\uff09 Expr ::= (Letting | Setting | Lambda | Apply | Var| Const) | \"(\" Expr \")\" Letting ::= \"let\" Var \"=\" Expr \"in\" Expr // let foo = 12 in ... Setting ::= Var \":=\" Expr \"in\" Expr // foo := a in ... Lambda ::= \"fn\" Var \"->\" Expr // fn x -> 12 Apply ::= Expr Expr // foo 3 \u5373foo(3) Var ::= ID Const ::= String | Float | Int Int ::= [0-9]+ Float ::= [0-9]+ \".\" [0-9]+ String ::= '\"' (\u4e0d\u662f\u300c\"\u300d\u7684\u4efb\u4e00\u5b57\u5143|('\\' '\"')) '\"'","title":"\u6c7a\u5b9a\u8a9e\u6cd5"},{"location":"defineASTandGrammar/#parsercombinatortokenize","text":"Parser combinator\uff08\u5206\u6790\u5668\u7d44\u5408\u5b50\uff09\u662f\u4e00\u7a2e\u5229\u7528\u9ad8\u968e\u51fd\u6578\u4f86\u7c21\u5316\u5206\u6790\u5668\u64b0\u5beb\u7684\u8fa6\u6cd5\u3002\u8b1b\u4e00\u500b\u7c21\u55ae\u7684\u6848\u4f8b\u5427\uff1a \u5047\u8a2d\u6211\u5011\u60f3\u8981\u5c07\u5b57\u4e32\u7684\u958b\u982dmatch 0~9 \u4e4b\u4e2d\u7684\u5176\u4e2d\u4e00\u500b\uff0c\u6211\u5011\u53ef\u4ee5\u5beb\u4e00\u500b\u51fd\u6578match0to9\u5982\u4e0b\uff1a function match0to9(string){ if (string[0] in 0,1,..,9){ let rest = string[1:]; let matched = string[0]; return {type: \"OK\", rest : rest, matched : matched}; } else{ return {type : \"Nothing\"}; } } \u5047\u8a2d\u6211\u5011\u8981\u5c07\u5b57\u4e32\u7684\u524d\u5169\u500b\u5b57\u7684match 0~9\u5462\uff1f\u5982\u679c\u6703\u9ad8\u968e\u51fd\u6578\u7684\u8a71\uff0c\u5f15\u5165\u4e00\u500b then \u51fd\u6578\uff0c\u7136\u5f8c\u628a match0to9 \u50b3\u9032\u53bb\uff0c\u9019\u6a23\u5beb\u8d77\u4f86\u6bd4\u8f03\u7c21\u6f54\uff1a function thenDo(input, fun){ if (input.type != \"Nothing\"{ middle = fun(input.rest); if (middle.type != \"Nothing\"){ middle.matched = input.matched + middle.matched return middle; }else{ return middle; // return nothing } }else{ input; // return nothing } }","title":"\u7528ParserCombinator\u9032\u884ctokenize"},{"location":"defineASTandGrammar/#_3","text":"","title":"\u5e73\u9762\u64cd\u4f5c"},{"location":"defineASTandGrammar/#_4","text":"\u6211\u5011\u85c9\u7531\u4ee5\u4e0a\u7684\u6982\u5ff5\uff0c\u53ef\u4ee5\u5b9a\u7fa9\u4e00\u500b\u5c07\u6587\u5b57\u3001\u7dda\u689d\u7b49\u5f62\u72c0\u6392\u5217\u52302D\u5e73\u9762\u7684\u8a9e\u6cd5\uff0c\u7562\u7adf\u4e0d\u8ad6\u8f38\u51faPDF\u3001SVG\u7b49\u7b49\uff0c\u7c97\u7565\u800c\u8a00\uff0c\u5c31\u662f\u4e00\u7a2e2D\u5e73\u9762\u5b89\u653e\u6587\u5b57\u7684\u8a9e\u8a00\u3002\u53e6\u5916PDF\u7684\u683c\u5f0f\u76f8\u7576\u6666\u6f80\uff0c\u5c31\u7b97_PDF Explained_\u7684PDF\u6559\u5b78\uff0c\u4e5f\u9084\u662f\u8981\u8f14\u52a9\u4f7f\u7528\u5176\u4ed6\u7684\u5de5\u5177\uff0c\u6c92\u8fa6\u6cd5\u770b\u4e86\u5c31\u81ea\u5df1\u624b\u523bPDF\uff0c\u6240\u4ee5\u9084\u662f\u7528 printpdf \u4f86\u6559\u5b78\u5427\u3002 \u73fe\u5728\u6211\u5011\u521d\u59cb\u5316\u4e00\u500b\u5c08\u6848\u76ee\u9304\uff0c\u7136\u5f8c\u5c07\u9700\u8981\u7684S-exp\u51fd\u5f0f\u5eab\u548cpdf\u51fd\u6578\u5eab\u6307\u5b9a\u70ba\u76f8\u4f9d\u51fd\u5f0f\u5eab\uff1a cargo init; cargo add rsexp printpdf; \u6211\u5011\u53ef\u4ee5\u5b9a\u7fa9\u4e00\u4e9b\u8868\u9054\u5f0f\uff08\u5305\u542b\u51fd\u6578\u3001\u8cc7\u6599\u7d50\u69cb\uff0cS-exp\u5f62\u5f0f\uff09\u7684\u8aaa\u660e\u5982\u4e0b\u3002 '() \u8868\u793a\u7a7a\u5217\u8868(empty list)\uff0c\u56e0\u70ba\u90fd\u8981\u8868\u9054\u662f\u51fd\u6578\u7684\u5f15\u7528\uff0c\u6240\u6709\u7684\u51fd\u6578\u5beb\u6210\u5f62\u5f0f (Func \"\u51fd\u6578\u540d\u7a31\" (\u5f15\u65781 \u5f15\u65782 ....)) \u3002Float\u630764\u4f4d\u5143\u6d6e\u9ede\u6578\uff1a (px Float) ; px\u8868\u9054pixel\u55ae\u4f4d\uff0c\u5132\u5b58\u6d6e\u9ede\u6578 (pt Float) ; pt\u8868\u9054point\u55ae\u4f4d\uff0c\u5132\u5b58\u6d6e\u9ede\u6578 (style (str pt)) ; \u6587\u5b57\u6a23\u5f0f\u3002String\u8868\u793a\u5b57\u578b\u7684\u8def\u5f91[fontPath]\uff0cFloat\u8868\u793a\u5b57\u578b\u5927\u5c0f(in Pt) (fontSize) (str String) ; \u5132\u5b58\u5b57\u4e32 (func \"createPDF\" '()) ;\u65b0\u589ePDF (func \"createPage\" '()) ;\u65b0\u589e\u9801\u9762 (func \"writePdf\" '(str)) ;\u5beb\u5165PDF\u9801\u9762\uff0cString\u662fPATH (func \"putchar\" '(str style x y)) ; x \u8ef8\u5411\u53f3\uff0cy \u8ef8\u5411\u4e0b\uff0cstr \u8868\u793a\u5b57\u5143(char)\uff0cstyle \u8868\u793a\u6587\u5b57\u6a23\u5f0f main.rs \u5148\u5f15\u7528\u51fd\u5f0f\u5eab\uff1a use printpdf::*; \u5176\u4e2d px \u3001 pt \u662f\u55ae\u4f4d\uff0c\u6240\u4ee5\u53ef\u4ee5\u5728 main.rs \u9019\u6a23\u5b9a\u7fa9\uff1a enum Measure{ Pt(f64), Px(f64) } \u6700\u5f8c\u4e00\u6b21\u5b9a\u7fa9expression\uff1a enum Expr{ Mea(Measure), // wrapper for measure Str(&str), Style{font_path : Measure, size : Measure}, Func(&str, Vec<Expr>), Void // return nothing } \u7136\u5f8c\u6211\u5011\u53ef\u4ee5\u9019\u6a23\u5b9a\u7fa9\u4e00\u500b\u8655\u7406\u8f38\u5165\u8f38\u51fa\u7684interpreter\u65bc interp \uff0c\u4e26\u4fee\u6539 main.rs \u5982\u4e0b\uff0c\u7e31\u4f7f\u6211\u5011\u6e96\u6642\uff1a fn interp(exp : Expr)->(){ // the function will be extended. match exp { Expr::Mea(Measure::Pt(x)) => println!(\"{:?} pt\", x), Expr::Mea(Measure::Px(x)) => println!(\"{:?} px\", x), _ => println!(\"not found expression\"), }; } // exexute interpreter fn main() { interp(Expr::Mea(Measure::Pt(2.2))); interp(Expr::Flo(2.2)); }","title":"\u57fa\u672c\u51fd\u6578\u8207\u76f4\u8b6f\u5668"},{"location":"index2/","text":"[ Clo: another typesetter]{align=\"center\"} [[ \u4e00\u500b\u6392\u7248\u5668\u7684\u5be6\u4f5c\u5fc3\u5f97]{.box}]{align=\"center\"} []{.box} [[ \u9673\u5efa\u753a]{.box}]{align=\"center\"} \u7248\u6b0a\u8072\u660e (c) 2023 \u9673\u5efa\u753a (Tan, Kian-ting) \u672c\u66f8\u5167\u5bb9\u975e\u7d93\u8a31\u53ef\uff0c\u7981\u6b62\u8907\u88fd\u3001\u5206\u767c\u3001\u5546\u696d\u4f7f\u7528\u7b49\u9055\u53cd\u8457\u4f5c\u6b0a\u6cd5\u4e4b\u884c\u70ba\u3002 \u7136\u66f8\u4e2d\u4e4b\u7a0b\u5f0f\u78bc\uff0c\u63a1\u7528 MIT\u8a31\u53ef\u8b49 \u6388\u6b0a\u3002 \u5e8f\u8a00 \u4ee5\u524d\u5f9e\u570b\u4e2d\u6642\u5019\u8a66\u7528Linux\u4ee5\u53ca\u67b6\u7ad9\u4ee5\u5f8c\uff0c\u5c31\u958b\u59cb\u60f3\u7528LaTeX\u6392\u7248\u4e9b\u81ea\u5df1\u6240\u5beb\u7684\u6771\u897f\uff0c\u5176\u4e2d\u5305\u542b\u89ba\u5f97LaTeX\u7684\u8a9e\u6cd5\u4e0d\u597d\u60f3\u8981\u91cd\u9020\u8f2a\u5b50\u3002\u5c31\u7b97\u5f8c\u4f86\u5927\u5b78\u6c92\u6709\u8d70\u4e0a\u8cc7\u8a0a\u5de5\u7a0b\u9019\u689d\u8def\uff0c\u9084\u662f\u5e0c\u671b\u6709\u5929\u81f3\u5c11\u80fd\u5920\u5b8c\u6210\u500b\u80fd\u7528\u7684\u96db\u5f62\u3002 \u4f46\u662f\u9019\u662f\u6d89\u53ca\u5b57\u9ad4\u6a94\u6848\u7684\u8655\u7406\u3001PDF\u7684\u8655\u7406\u3001\u8a9e\u6cd5\u5206\u6790\uff0c\u5f8c\u4f86\u81ea\u5df1\u56e0\u70ba\u4e0d\u77e5\u9053\u5982\u4f55\u958b\u767c\uff0c\u6240\u4ee5\u4e00\u76f4\u505c\u64fa\u3002\u4e0d\u662f\u9047\u5230\u5f88\u591a\u87f2\uff0c\u5c31\u662f\u6548\u80fd\u554f\u984c\u6709\u7f3a\u5931\u3002\u56e0\u70ba\u6642\u9593\u7e41\u5fd9\u5f88\u5c11\u66f4\u4e0d\u6d88\u8aaa\u4e86\u3002\u751a\u81f3\u8cb7\u4e86Knuth\u6559\u6388\u7684 Digital Typography \uff0c\u60f3\u8981\u77ad\u89e3\u65b7\u884c\u6f14\u7b97\u6cd5\uff0c\u7d50\u679c\u7c97\u4f30\u4e94\u3001\u516d\u5341\u9801\uff0c\u6240\u4ee5\u5e7e\u4e4e\u6c92\u6709\u8b80\u3002 \u53e6\u5916\u7b46\u8005\u4e00\u500b\u5206\u652f\u8208\u8da3\u662f\u7de8\u8b6f\u5668\u7684\u76f8\u95dc\u77e5\u8b58\uff0c\u6240\u4ee5\u958b\u59cb\u8b80\u548c\u738b\u57a0\u7684\u7de8\u8b6f\u5668\u601d\u60f3\u7cfb\u51fa\u540c\u9580\u7684Jeremy G. Siek\u6240\u8457\u4f5c\u4e4b_Essential of Complication: An Incremental Approach in Racket","title":"Index2"}]}